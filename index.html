<!DOCTYPE html>
<html>
<head>
    <title>Swap on Uniswap</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        h1 {
            margin-top: 50px;
        }

        .button {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .button-black {
            background-color: #000;
            color: #fff;
            border: 2px solid #fff;
        }

        .button-white {
            background-color: #fff;
            color: #000;
            border: 2px solid #000;
        }

        #ethAmount {
            display: none;
            margin-top: 20px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            text-align: center;
        }

        #swapButton {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Swap on Uniswap</h1>

    <button id="connectButton" class="button button-black">Connect Wallet</button>

    <input type="number" id="ethAmount" min="0" step="0.01" placeholder="Enter Ethereum Amount">

    <button id="swapButton" class="button button-white">Swap</button>

    <script>
        const connectButton = document.getElementById('connectButton');
        const ethAmountInput = document.getElementById('ethAmount');
        const swapButton = document.getElementById('swapButton');

        // Function to handle the click event of the Connect Wallet button
        connectButton.addEventListener('click', () => {
            connectWallet()
                .then(() => {
                    connectButton.style.display = 'none';
                    ethAmountInput.style.display = 'block';
                    swapButton.style.display = 'block';
                })
                .catch(error => {
                    console.error(error);
                });
        });

        async function connectWallet() {
            // Logic to connect the wallet goes here
            // This is just a placeholder function
            // Replace it with your actual wallet connection logic
            // You can use Ethereum provider libraries like ethers.js or web3.js

            // Simulating a successful wallet connection
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve();
                }, 2000);
            });
        }

        // Function to handle the click event of the Swap button
        swapButton.addEventListener('click', () => {
            getPriceAndRedirect();
        });

        async function getPriceAndRedirect() {
            const tokenAddress = '0x6982508145454Ce325dDbE47a25d4ec3d2311933';
            const networkId = 1; // Ethereum mainnet

            // Get the entered Ethereum amount
            const ethAmount = ethAmountInput.value;

            // Fetch the price of your token
            const tokenPrice = await getTokenPrice(tokenAddress);

            // Calculate the amount of your token based on the entered Ethereum amount
            const tokenAmount = ethAmount / tokenPrice;

            // Generate the Uniswap URL
            const uniswapUrl = `https://app.uniswap.org/#/swap?inputCurrency=${tokenAddress}&outputCurrency=ETH&exactInput=${tokenAmount}&network=${networkId}`;

            // Redirect the user to the Uniswap interface
window.location.href = uniswapUrl;
        }

        async function getTokenPrice(tokenAddress) {
            const apiUrl = `https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2`;
            const query = `
                {
                    token(id: "${tokenAddress.toLowerCase()}") {
                        derivedETH
                    }
                }
            `;

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ query }),
            });

            const data = await response.json();
            const tokenPrice = parseFloat(data.data.token.derivedETH);
            return tokenPrice;
        }
    </script>
</body>
</html>
